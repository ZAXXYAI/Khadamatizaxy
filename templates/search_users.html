<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #f0f2f5;
      color: #333;
      padding: 15px;
    }

    h2 {
      color: #008080;
      text-align: center;
      margin-bottom: 20px;
    }

    form {
      background-color: #ffffff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 100%;
      margin: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    input[type="text"], select {
      padding: 10px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
    }

    button {
      padding: 10px;
      width: 100%;
      background-color: #008080;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .results {
      margin-top: 30px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .user-card {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 15px;
      width: 90%;
      max-width: 300px;
      text-align: center;
    }

    .user-card img {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
      border: 3px solid #008080;
    }

    .user-card a {
      font-weight: bold;
      font-size: 18px;
      color: #008080;
      text-decoration: none;
    }

    .user-card p {
      margin: 5px 0;
      font-size: 14px;
    }

    .no-results {
      color: red;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
    }

    .back-btn {
      display: block;
      margin: 30px auto 0;
      padding: 10px 25px;
      background-color: #ccc;
      color: #333;
      border: none;
      border-radius: 8px;
      text-align: center;
      text-decoration: none;
    }
  </style>
</head>
<body>

<h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>

{% if not query and wilaya == 'all' and (not gender or gender == 'Ø§Ù„ÙƒÙ„') %}
<form method="get" action="{{ url_for('search_users') }}">
  <input type="text" name="query" placeholder="Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„" value="{{ query }}">

  <select name="wilaya">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
    <option value="all">ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</option>
    {% for w in [
      "01 - Ø£Ø¯Ø±Ø§Ø±", "02 - Ø§Ù„Ø´Ù„Ù", "03 - Ø§Ù„Ø£ØºÙˆØ§Ø·", "04 - Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ", "05 - Ø¨Ø§ØªÙ†Ø©", "06 - Ø¨Ø¬Ø§ÙŠØ©", "07 - Ø¨Ø³ÙƒØ±Ø©", "08 - Ø¨Ø´Ø§Ø±", "09 - Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", "10 - Ø§Ù„Ø¨ÙˆÙŠØ±Ø©",
      "11 - ØªÙ…Ù†Ø±Ø§Ø³Øª", "12 - ØªØ¨Ø³Ø©", "13 - ØªÙ„Ù…Ø³Ø§Ù†", "14 - ØªÙŠØ§Ø±Øª", "15 - ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ", "16 - Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", "17 - Ø§Ù„Ø¬Ù„ÙØ©", "18 - Ø¬ÙŠØ¬Ù„", "19 - Ø³Ø·ÙŠÙ", "20 - Ø³Ø¹ÙŠØ¯Ø©",
      "21 - Ø³ÙƒÙŠÙƒØ¯Ø©", "22 - Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³", "23 - Ø¹Ù†Ø§Ø¨Ø©", "24 - Ù‚Ø§Ù„Ù…Ø©", "25 - Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", "26 - Ø§Ù„Ù…Ø¯ÙŠØ©", "27 - Ù…Ø³ØªØºØ§Ù†Ù…", "28 - Ø§Ù„Ù…Ø³ÙŠÙ„Ø©", "29 - Ù…Ø¹Ø³ÙƒØ±", "30 - ÙˆØ±Ù‚Ù„Ø©",
      "31 - ÙˆÙ‡Ø±Ø§Ù†", "32 - Ø§Ù„Ø¨ÙŠØ¶", "33 - Ø¥Ù„ÙŠØ²ÙŠ", "34 - Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬", "35 - Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³", "36 - Ø§Ù„Ø·Ø§Ø±Ù", "37 - ØªÙ†Ø¯ÙˆÙ", "38 - ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª", "39 - Ø§Ù„ÙˆØ§Ø¯ÙŠ", "40 - Ø®Ù†Ø´Ù„Ø©",
      "41 - Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³", "42 - ØªÙŠØ¨Ø§Ø²Ø©", "43 - Ù…ÙŠÙ„Ø©", "44 - Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰", "45 - Ø§Ù„Ù†Ø¹Ø§Ù…Ø©", "46 - Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª", "47 - ØºØ±Ø¯Ø§ÙŠØ©", "48 - ØºÙ„ÙŠØ²Ø§Ù†", "49 - ØªÙ…ÙŠÙ…ÙˆÙ†", 
      "50 - Ø¨Ø±Ø¬ Ø¨Ø§Ø¬ÙŠ Ù…Ø®ØªØ§Ø±", "51 - Ø£ÙˆÙ„Ø§Ø¯ Ø¬Ù„Ø§Ù„", "52 - Ø¨Ù†ÙŠ Ø¹Ø¨Ø§Ø³", "53 - Ø¹ÙŠÙ† ØµØ§Ù„Ø­", "54 - Ø¹ÙŠÙ† Ù‚Ø²Ø§Ù…", "55 - ØªÙ‚Ø±Øª", "56 - Ø¬Ø§Ù†Øª", "57 - Ø§Ù„Ù…ØºÙŠØ±", "58 - Ø¥Ù† ØµØ§Ù„Ø­"
    ] %}
      <option value="{{ w }}" {% if wilaya == w %}selected{% endif %}>{{ w }}</option>
    {% endfor %}
  </select>

  <select name="gender">
    <option value="Ø§Ù„ÙƒÙ„" {% if gender == 'Ø§Ù„ÙƒÙ„' %}selected{% endif %}>Ø§Ù„ÙƒÙ„</option>
    <option value="Ø°ÙƒØ±" {% if gender == 'Ø°ÙƒØ±' %}selected{% endif %}>Ø°ÙƒØ±</option>
    <option value="Ø£Ù†Ø«Ù‰" {% if gender == 'Ø£Ù†Ø«Ù‰' %}selected{% endif %}>Ø£Ù†Ø«Ù‰</option>
  </select>

  <button type="submit">ğŸ” Ø¨Ø­Ø«</button>
</form>
{% endif %}

{% if query or wilaya != 'all' or (gender and gender != 'Ø§Ù„ÙƒÙ„') %}
  <div class="results">
    {% if users and users|length > 0 %}
      {% for user in users %}
        <div class="user-card">
          <img src="{{ url_for('static', filename=user.image_path or 'default.jpg') }}" alt="User Image">
          <a href="{{ url_for('public_profile', user_id=user.id) }}">{{ user.name }}</a>
          <p>{{ user.wilaya }} - {{ user.gender }}</p>
          <p><strong>Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> {{ user.service_type }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p class="no-results">ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«</p>
    {% endif %}
  </div>

  <a href="{{ url_for('search_users') }}" class="back-btn">ğŸ” Ø¨Ø­Ø« Ø¬Ø¯ÙŠØ¯</a>
{% endif %}

</body>
</html>